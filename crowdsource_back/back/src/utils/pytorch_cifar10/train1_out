wandb: Currently logged in as: daeyeolkim. Use `wandb login --relogin` to force relogin
wandb: Tracking run with wandb version 0.13.2
wandb: Run data is saved locally in /home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/wandb/run-20220901_175627-cmscw0il
wandb: Run `wandb offline` to turn off syncing.
wandb: Syncing run electric-puddle-269
wandb: ‚≠êÔ∏è View project at https://wandb.ai/daeyeolkim/2cp
wandb: üöÄ View run at https://wandb.ai/daeyeolkim/2cp/runs/cmscw0il
/home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/data_load.py:20: UserWarning: Creating a tensor from a list of numpy.ndarrays is extremely slow. Please consider converting the list to a single numpy.ndarray with numpy.array() before converting to a tensor. (Triggered internally at  ../torch/csrc/utils/tensor_new.cpp:201.)
  _data = torch.tensor(_data)
1
Files already downloaded and verified
['pytorch_cifar10_train.py', '1']
trainer1: Connected to contract at address 0xbCE4FCfa095d92396B874e695b0Bc3a548183da5
trainer1: Waiting for round 1 (30000 seconds remaining)...
trainer1: Round 1 started
trainer1: Training model, round 1...
trainer1: Adding model update..., local model cid : QmexCJzK1ZbMHQyajhrAQZHKytNUe5XEtHpEaVb7iLFcoK, round : 1
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 2 (29920 seconds remaining)...
trainer1: Round 2 started
trainer1: Training model, round 2...
trainer1: Adding model update..., local model cid : QmY387qQWde3uKEmpnMtWK5k8qKKbfgbNsFYgxkYeEAf7M, round : 2
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 3 (30000 seconds remaining)...
trainer1: Round 3 started
trainer1: Training model, round 3...
trainer1: Adding model update..., local model cid : QmWFgRztt3G4xRrv8WuRtSELdMJgDg1fbGnoreaUPp57cr, round : 3
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 4 (29927 seconds remaining)...
trainer1: Round 4 started
trainer1: Training model, round 4...
trainer1: Adding model update..., local model cid : QmTfW6FWtpQzsY6ZPgU5giTsSjnBSN527gCuH27TmRyPBp, round : 4
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 5 (30000 seconds remaining)...
trainer1: Round 5 started
trainer1: Training model, round 5...
trainer1: Adding model update..., local model cid : QmUU8nv2bXDtHcj98arfUzzYGs9oQYGNHvw2g3Rmo33oBF, round : 5
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 6 (30000 seconds remaining)...
trainer1: Round 6 started
trainer1: Training model, round 6...
trainer1: Adding model update..., local model cid : QmR3BgJDMhweVvqzTvPSrfx2nF2RA1ykr95UFCf3ewEoE4, round : 6
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 7 (30000 seconds remaining)...
trainer1: Round 7 started
trainer1: Training model, round 7...
trainer1: Adding model update..., local model cid : QmYBCXAamjBp25psNy6DLX3nQFoCmqdBFSv3fehvvxd7MY, round : 7
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 8 (29927 seconds remaining)...
trainer1: Round 8 started
trainer1: Training model, round 8...
trainer1: Adding model update..., local model cid : QmP5S6nJjno4GXtrP5iCCwjaW3DT8jHK1eVZanN6qxMv6V, round : 8
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 9 (30000 seconds remaining)...
trainer1: Round 9 started
trainer1: Training model, round 9...
trainer1: Adding model update..., local model cid : QmQfgcZWBPuubTBN6MeftMe4A4hLMuSMxc4D3X4aPEEhiN, round : 9
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 10 (29926 seconds remaining)...
trainer1: Round 10 started
trainer1: Training model, round 10...
trainer1: Adding model update..., local model cid : QmZWMnTAsygbjsFzY9CZ1V46ytGAZ7PJC6G9sGLhfjfxmV, round : 10
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 11 (29926 seconds remaining)...
trainer1: Round 11 started
trainer1: Training model, round 11...
trainer1: Adding model update..., local model cid : QmbkYVnNjVzszTmUJuPEED6ESNrACJZy58gKkXZCQSh8ki, round : 11
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 12 (29927 seconds remaining)...
trainer1: Round 12 started
trainer1: Training model, round 12...
trainer1: Adding model update..., local model cid : QmX2TS79PoeWAfdh6bBHVcQjvMzdfwvzfuWRs1vhq3rrEr, round : 12
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 13 (29926 seconds remaining)...
trainer1: Round 13 started
trainer1: Training model, round 13...
trainer1: Adding model update..., local model cid : QmWKv6awFvWpuTUaJW3AmhXS9PNE8nNZDwKU33o9AWAcYu, round : 13
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 14 (30000 seconds remaining)...
trainer1: Round 14 started
trainer1: Training model, round 14...
trainer1: Adding model update..., local model cid : Qmev2XdZyN28KEnuiobeW6EyqPfqSunbTQDcP2LG6D14mM, round : 14
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 15 (29927 seconds remaining)...
trainer1: Round 15 started
trainer1: Training model, round 15...
trainer1: Adding model update..., local model cid : QmdAx2VmchmtoyVinc3HFquxjbbeAmUMobGTCcpRhJDB4v, round : 15
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 16 (30000 seconds remaining)...
trainer1: Round 16 started
trainer1: Training model, round 16...
trainer1: Adding model update..., local model cid : Qma41QegLnE1x9HCD7Ercvo1KNq7knnpuTCWx71rZVXTRc, round : 16
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 17 (30000 seconds remaining)...
trainer1: Round 17 started
trainer1: Training model, round 17...
trainer1: Adding model update..., local model cid : QmV22fbiN9mosQKHaEeoWzaPch5XTNchNMG1djig2gKpyB, round : 17
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 18 (29927 seconds remaining)...
trainer1: Round 18 started
trainer1: Training model, round 18...
trainer1: Adding model update..., local model cid : QmYeAxEm1FUhF7i4GSRBwRhRADm2ZjYdTvpH2AdytbM85v, round : 18
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 19 (30000 seconds remaining)...
trainer1: Round 19 started
trainer1: Training model, round 19...
trainer1: Adding model update..., local model cid : QmP4Mv5HF5fgsPVrnLL1CD4RKzgbu4SV9jZV6AuTwoQeZM, round : 19
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 20 (29926 seconds remaining)...
trainer1: Round 20 started
trainer1: Training model, round 20...
trainer1: Adding model update..., local model cid : Qmd8yEbjPxRLmPryhP1VmBeJD2VQtnJ8VgFDWPuEBp3RWp, round : 20
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 21 (30000 seconds remaining)...
trainer1: Round 21 started
trainer1: Training model, round 21...
trainer1: Adding model update..., local model cid : QmZx7DWJfTNxj31wxTykaGhDq32qcF3rrPft1Vp1i7Zh4G, round : 21
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 22 (30000 seconds remaining)...
trainer1: Round 22 started
trainer1: Training model, round 22...
trainer1: Adding model update..., local model cid : QmR35jdKMeQTibSg2iRL7TzXEDCLLvQfVQrPsabq4yD24J, round : 22
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 23 (30000 seconds remaining)...
trainer1: Round 23 started
trainer1: Training model, round 23...
trainer1: Adding model update..., local model cid : QmakmhvufQ9Vej75u1ns8BUas4DyWfac41tSyByxB6br67, round : 23
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 24 (29929 seconds remaining)...
trainer1: Round 24 started
trainer1: Training model, round 24...
trainer1: Adding model update..., local model cid : QmeqAdkcSFqDEhTSGA4dDGqxJyzkdzumXcusPZWTz3BMDQ, round : 24
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
trainer1: Waiting for round 25 (30000 seconds remaining)...
trainer1: Round 25 started
trainer1: Training model, round 25...
trainer1: Adding model update..., local model cid : QmedmhrJAFYsKpsuJBPs8ePUdn47iQkzhVwQHR3JvooD6j, round : 25
trainer1: Waiting for 1 transactions...
trainer1: 1 transactions mined
wandb: Waiting for W&B process to finish... (failed 1). Press Control-C to abort syncing.
wandb: - 0.001 MB of 0.001 MB uploaded (0.000 MB deduped)wandb: \ 0.001 MB of 0.001 MB uploaded (0.000 MB deduped)wandb: | 0.001 MB of 0.001 MB uploaded (0.000 MB deduped)wandb: / 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: \ 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: | 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: / 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: \ 0.003 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: | 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: / 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: \ 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: | 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: / 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb:                                                                                
wandb: 
wandb: Run history:
wandb: loss ‚ñà‚ñÜ‚ñÑ‚ñÖ‚ñÖ‚ñÑ‚ñà‚ñá‚ñÉ‚ñÑ‚ñÇ‚ñÅ‚ñÇ‚ñÉ‚ñÇ‚ñÑ‚ñÖ‚ñÇ‚ñÇ‚ñÖ‚ñÉ‚ñÅ‚ñÑ‚ñÜ‚ñÅ‚ñÅ‚ñÖ‚ñÖ‚ñÇ‚ñÖ‚ñÅ‚ñÅ‚ñÖ‚ñÅ‚ñÇ‚ñÅ‚ñÉ‚ñÇ‚ñÅ‚ñÅ
wandb: 
wandb: Run summary:
wandb: loss 1.83713
wandb: 
wandb: Synced electric-puddle-269: https://wandb.ai/daeyeolkim/2cp/runs/cmscw0il
wandb: Synced 6 W&B file(s), 0 media file(s), 0 artifact file(s) and 0 other file(s)
wandb: Find logs at: ./wandb/run-20220901_175627-cmscw0il/logs
Traceback (most recent call last):
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/http/client.py", line 1348, in getresponse
    response.begin()
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/http/client.py", line 316, in begin
    version, status, reason = self._read_status()
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/http/client.py", line 277, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/socket.py", line 669, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/util/retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/packages/six.py", line 735, in reraise
    raise value
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 428, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 335, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='127.0.0.1', port=7545): Read timed out. (read timeout=10)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "pytorch_cifar10_train.py", line 495, in <module>
    custom_cifar_crowdsource()
  File "pytorch_cifar10_train.py", line 476, in custom_cifar_crowdsource
    trainer.train_until(final_round_num=TRAINING_ITERATIONS,batch_size=4,epochs=5,learning_rate=0.001)
  File "pytorch_cifar10_train.py", line 190, in train_until
    self._gas_history[r] = self.get_gas_used()
  File "pytorch_cifar10_train.py", line 79, in get_gas_used
    return self._contract.get_gas_used()
  File "/home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/contract_clients.py", line 30, in get_gas_used
    receipts = [self._w3.eth.getTransactionReceipt(tx) for tx in self.txs]
  File "/home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/contract_clients.py", line 30, in <listcomp>
    receipts = [self._w3.eth.getTransactionReceipt(tx) for tx in self.txs]
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/module.py", line 57, in caller
    result = w3.manager.request_blocking(method_str, params, error_formatters)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/manager.py", line 156, in request_blocking
    response = self._make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/manager.py", line 135, in _make_request
    return request_func(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 76, in apply_formatters
    response = make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/gas_price_strategy.py", line 35, in middleware
    return make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 74, in apply_formatters
    response = make_request(method, formatted_params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/attrdict.py", line 33, in middleware
    response = make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 76, in apply_formatters
    response = make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/normalize_errors.py", line 25, in middleware
    result = make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 76, in apply_formatters
    response = make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 74, in apply_formatters
    response = make_request(method, formatted_params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/buffered_gas_estimate.py", line 40, in middleware
    return make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/exception_retry_request.py", line 104, in middleware
    return make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/providers/rpc.py", line 88, in make_request
    raw_response = make_post_request(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/_utils/request.py", line 48, in make_post_request
    response = session.post(endpoint_uri, data=data, *args, **kwargs)  # type: ignore
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/sessions.py", line 581, in post
    return self.request('POST', url, data=data, json=json, **kwargs)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=7545): Read timed out. (read timeout=10)
