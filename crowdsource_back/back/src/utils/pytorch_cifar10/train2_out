wandb: Currently logged in as: daeyeolkim. Use `wandb login --relogin` to force relogin
wandb: Tracking run with wandb version 0.13.2
wandb: Run data is saved locally in /home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/wandb/run-20220901_175637-3lsiae17
wandb: Run `wandb offline` to turn off syncing.
wandb: Syncing run woven-night-270
wandb: ‚≠êÔ∏è View project at https://wandb.ai/daeyeolkim/2cp
wandb: üöÄ View run at https://wandb.ai/daeyeolkim/2cp/runs/3lsiae17
/home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/data_load.py:20: UserWarning: Creating a tensor from a list of numpy.ndarrays is extremely slow. Please consider converting the list to a single numpy.ndarray with numpy.array() before converting to a tensor. (Triggered internally at  ../torch/csrc/utils/tensor_new.cpp:201.)
  _data = torch.tensor(_data)
2
Files already downloaded and verified
['pytorch_cifar10_train.py', '2']
trainer2: Connected to contract at address 0xbCE4FCfa095d92396B874e695b0Bc3a548183da5
trainer2: Waiting for round 1 (30000 seconds remaining)...
trainer2: Round 1 started
trainer2: Training model, round 1...
trainer2: Adding model update..., local model cid : QmPvS2dzTgYecoRSTxDNP56idQe8k9GBXJ6nzbkSJe72rD, round : 1
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 2 (29907 seconds remaining)...
trainer2: Round 2 started
trainer2: Training model, round 2...
trainer2: Adding model update..., local model cid : QmenFMdSAwz5mqxBWURAtY3vmve8asBsjhhPPFejRthjSp, round : 2
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 3 (30000 seconds remaining)...
trainer2: Round 3 started
trainer2: Training model, round 3...
trainer2: Adding model update..., local model cid : QmUL17397k2uvsfuDEngESVnYbm9LKsFNuXQ1e2whnXV8w, round : 3
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 4 (29927 seconds remaining)...
trainer2: Round 4 started
trainer2: Training model, round 4...
trainer2: Adding model update..., local model cid : QmYS286k2vmoRKCYmLQrdCiigiv9p2RuVF6Vj9jXVWEfJg, round : 4
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 5 (29927 seconds remaining)...
trainer2: Round 5 started
trainer2: Training model, round 5...
trainer2: Adding model update..., local model cid : QmbdoTnn71BPNNdJ6ShYzfWg7c123ATX63zsCzX3jYfU4j, round : 5
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 6 (29926 seconds remaining)...
trainer2: Round 6 started
trainer2: Training model, round 6...
trainer2: Adding model update..., local model cid : QmRLhyRP5izH5c9iTecMwhBKXfZzLDgrFqaMj7F7XdEN7M, round : 6
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 7 (30000 seconds remaining)...
trainer2: Round 7 started
trainer2: Training model, round 7...
trainer2: Adding model update..., local model cid : QmaqxDPg6BWtbkt2Ec7fXQefjsmGZL9WE9VNovDBKoZFqQ, round : 7
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 8 (29927 seconds remaining)...
trainer2: Round 8 started
trainer2: Training model, round 8...
trainer2: Adding model update..., local model cid : QmTjghkH5ALNiVrR4deH8ST4fKo4e33yg6cFw3BpcFKP3h, round : 8
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 9 (30000 seconds remaining)...
trainer2: Round 9 started
trainer2: Training model, round 9...
trainer2: Adding model update..., local model cid : QmRRgKAFZNeFCNBVQBfHyAWqTwa85bBS4k8LJVt2wpgbs9, round : 9
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 10 (29926 seconds remaining)...
trainer2: Round 10 started
trainer2: Training model, round 10...
trainer2: Adding model update..., local model cid : QmUmmg7DGhS6xgDmtMU2sdsKm9ho2mHBj78QnbepUxcPPW, round : 10
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 11 (29926 seconds remaining)...
trainer2: Round 11 started
trainer2: Training model, round 11...
trainer2: Adding model update..., local model cid : QmdMMvR2ZraR1QyohoHb14yDydXHLcfKWRDcvPTnXB6ntt, round : 11
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 12 (30000 seconds remaining)...
trainer2: Round 12 started
trainer2: Training model, round 12...
trainer2: Adding model update..., local model cid : QmPEs8HZEZSZGoUxepsepE7H8fVQu81FLgESCRZ2XmHiHN, round : 12
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 13 (29927 seconds remaining)...
trainer2: Round 13 started
trainer2: Training model, round 13...
trainer2: Adding model update..., local model cid : QmQsTwqgkenkwZJpTTGWyNM51VjfmiJSWDzogupa9muCwy, round : 13
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 14 (30000 seconds remaining)...
trainer2: Round 14 started
trainer2: Training model, round 14...
trainer2: Adding model update..., local model cid : QmXFhzD47ynfirAiiYywKTvN6XEs53iZXvc1tZLJywQjrZ, round : 14
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 15 (29927 seconds remaining)...
trainer2: Round 15 started
trainer2: Training model, round 15...
trainer2: Adding model update..., local model cid : QmV888iLsdwND1LZ2hC26d4hN5SMBRPkDWScpPsoDTanQG, round : 15
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 16 (30000 seconds remaining)...
trainer2: Round 16 started
trainer2: Training model, round 16...
trainer2: Adding model update..., local model cid : QmZcV2Virs2oEtPxsRUNXdKiB7NXhbLFraQkHUuJwbMYk5, round : 16
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 17 (30000 seconds remaining)...
trainer2: Round 17 started
trainer2: Training model, round 17...
trainer2: Adding model update..., local model cid : QmYJZdezvNwWwMPQDAy7X6sA6k9U2Wky8a84qyhP1hmtJE, round : 17
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 18 (29927 seconds remaining)...
trainer2: Round 18 started
trainer2: Training model, round 18...
trainer2: Adding model update..., local model cid : QmQmMbu5NoJoKZPAnWwqBNDTh7N8GcBPRZ6HwUJof8pJWu, round : 18
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 19 (30000 seconds remaining)...
trainer2: Round 19 started
trainer2: Training model, round 19...
trainer2: Adding model update..., local model cid : Qmbgrh5fCd5SzasNwagwQF694sdQDR1d2MtgSQviFLuj4i, round : 19
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 20 (30000 seconds remaining)...
trainer2: Round 20 started
trainer2: Training model, round 20...
trainer2: Adding model update..., local model cid : QmQWtZS3uRUnobD3VMYrVb9fzywTg5d9HyRnBTw4pqoNKi, round : 20
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 21 (30000 seconds remaining)...
trainer2: Round 21 started
trainer2: Training model, round 21...
trainer2: Adding model update..., local model cid : QmebUvHHfJeKAVzprNua4pdU4FZNmFKwGFqXiMjhQ74iPp, round : 21
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 22 (29928 seconds remaining)...
trainer2: Round 22 started
trainer2: Training model, round 22...
trainer2: Adding model update..., local model cid : QmW6FKPGeht2AFmkT76z3ftFBk7UzV1Q4ZwrAHUedDE4X1, round : 22
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 23 (29927 seconds remaining)...
trainer2: Round 23 started
trainer2: Training model, round 23...
trainer2: Adding model update..., local model cid : QmXCmK2dNHxK5DzfwAYHhV4AyQM9GEWNN1xC6ju89p9GHZ, round : 23
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 24 (30000 seconds remaining)...
trainer2: Round 24 started
trainer2: Training model, round 24...
trainer2: Adding model update..., local model cid : QmXWZD767YDZRqmnfYch3can8NvuwGF3SH7EWaWMCDiRuq, round : 24
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
trainer2: Waiting for round 25 (30000 seconds remaining)...
trainer2: Round 25 started
trainer2: Training model, round 25...
trainer2: Adding model update..., local model cid : QmUdRpLm7VQwr85oJqZobs5UYvSpcHZQWxo4Gi4WRfq2vN, round : 25
trainer2: Waiting for 1 transactions...
trainer2: 1 transactions mined
wandb: Waiting for W&B process to finish... (failed 1). Press Control-C to abort syncing.
wandb: - 0.001 MB of 0.001 MB uploaded (0.000 MB deduped)wandb: \ 0.001 MB of 0.001 MB uploaded (0.000 MB deduped)wandb: | 0.001 MB of 0.001 MB uploaded (0.000 MB deduped)wandb: / 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: \ 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: | 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: / 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: \ 0.001 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: | 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: / 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: \ 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: | 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: / 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: - 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb: \ 0.024 MB of 0.024 MB uploaded (0.000 MB deduped)wandb:                                                                                
wandb: 
wandb: Run history:
wandb: loss ‚ñá‚ñà‚ñÖ‚ñÖ‚ñÑ‚ñÖ‚ñà‚ñÖ‚ñÖ‚ñÇ‚ñÉ‚ñÇ‚ñÇ‚ñÉ‚ñÇ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÇ‚ñÇ‚ñÇ‚ñÜ‚ñÇ‚ñÉ‚ñÅ‚ñÇ‚ñÅ‚ñÅ‚ñÑ‚ñÅ‚ñÅ‚ñÅ‚ñÅ‚ñÅ‚ñÅ‚ñÅ‚ñÅ‚ñÇ‚ñÇ
wandb: 
wandb: Run summary:
wandb: loss 0.09321
wandb: 
wandb: Synced woven-night-270: https://wandb.ai/daeyeolkim/2cp/runs/3lsiae17
wandb: Synced 6 W&B file(s), 0 media file(s), 0 artifact file(s) and 0 other file(s)
wandb: Find logs at: ./wandb/run-20220901_175637-3lsiae17/logs
Traceback (most recent call last):
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 426, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 421, in _make_request
    httplib_response = conn.getresponse()
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/http/client.py", line 1348, in getresponse
    response.begin()
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/http/client.py", line 316, in begin
    version, status, reason = self._read_status()
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/http/client.py", line 277, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/socket.py", line 669, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/util/retry.py", line 410, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/packages/six.py", line 735, in reraise
    raise value
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 428, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/urllib3/connectionpool.py", line 335, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='127.0.0.1', port=7545): Read timed out. (read timeout=10)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "pytorch_cifar10_train.py", line 495, in <module>
    custom_cifar_crowdsource()
  File "pytorch_cifar10_train.py", line 476, in custom_cifar_crowdsource
    trainer.train_until(final_round_num=TRAINING_ITERATIONS,batch_size=4,epochs=5,learning_rate=0.001)
  File "pytorch_cifar10_train.py", line 190, in train_until
    self._gas_history[r] = self.get_gas_used()
  File "pytorch_cifar10_train.py", line 79, in get_gas_used
    return self._contract.get_gas_used()
  File "/home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/contract_clients.py", line 30, in get_gas_used
    receipts = [self._w3.eth.getTransactionReceipt(tx) for tx in self.txs]
  File "/home/dy/2cp_new/crowdsource_back/back/src/utils/pytorch_cifar10/contract_clients.py", line 30, in <listcomp>
    receipts = [self._w3.eth.getTransactionReceipt(tx) for tx in self.txs]
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/module.py", line 57, in caller
    result = w3.manager.request_blocking(method_str, params, error_formatters)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/manager.py", line 156, in request_blocking
    response = self._make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/manager.py", line 135, in _make_request
    return request_func(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 76, in apply_formatters
    response = make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/gas_price_strategy.py", line 35, in middleware
    return make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 74, in apply_formatters
    response = make_request(method, formatted_params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/attrdict.py", line 33, in middleware
    response = make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 76, in apply_formatters
    response = make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/normalize_errors.py", line 25, in middleware
    result = make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 76, in apply_formatters
    response = make_request(method, params)
  File "cytoolz/functoolz.pyx", line 250, in cytoolz.functoolz.curry.__call__
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/formatting.py", line 74, in apply_formatters
    response = make_request(method, formatted_params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/buffered_gas_estimate.py", line 40, in middleware
    return make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/middleware/exception_retry_request.py", line 104, in middleware
    return make_request(method, params)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/providers/rpc.py", line 88, in make_request
    raw_response = make_post_request(
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/web3/_utils/request.py", line 48, in make_post_request
    response = session.post(endpoint_uri, data=data, *args, **kwargs)  # type: ignore
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/sessions.py", line 581, in post
    return self.request('POST', url, data=data, json=json, **kwargs)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/tvs/anaconda3/envs/2cp_new/lib/python3.8/site-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=7545): Read timed out. (read timeout=10)
